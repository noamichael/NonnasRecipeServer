<p-table #table selectionMode="single" (onLazyLoad)="onLazyLoad($event)" (onRowSelect)="onRowSelect($event.data)"
  [value]="recipes.data" [lazy]="true" [paginator]="true" [rows]="recipes.count" dataKey="id" [totalRecords]="recipes.totalRecordCount">
  <ng-template pTemplate="caption">
    <div class="table-header">
      <div class="table-caption">
        Recipes
      </div>
      <div class="table-actions">
        <button pButton type="button" label="Add" (click)="openRecipe()" icon="pi pi-plus" class="ui-button-success"></button>
        <button pButton type="button" label="Clear" (click)="clearFilters(table)" icon="pi pi-times" class="ui-button-primary"></button>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Cook Time</th>
      <th>Serving</th>
      <th>WW</th>
      <th>Pts</th>
    </tr>
    <tr>
      <th>
        <input type="text" class="table-filter" [(ngModel)]="filters.recipeName" (ngModelChange)="onFilterChange('recipeName', table)"
          placeholder="Name" pInputText>
      </th>
      <th>
        <p-dropdown [options]="recipeTypes" [(ngModel)]="filters.recipeType" (ngModelChange)="onFilterChange('recipeType', table)"
          name="recipeType" [style]="{width: '100%'}" [(ngModel)]="recipeType" optionLabel="label" required>
        </p-dropdown>
      </th>
      <th></th>
      <th></th>
      <th>
        <p-triStateCheckbox [(ngModel)]="filters.weightWatchers" (ngModelChange)="onFilterChange('weightWatchers', table)"></p-triStateCheckbox>
      </th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-recipe>
    <tr [pSelectableRow]="recipe">
      <td>{{recipe.recipeName}}</td>
      <td>{{recipe.recipeType}}</td>
      <td>{{recipe.cookTime}}</td>
      <td>{{recipe.servingSize}}</td>
      <td>{{recipe.weightWatchers ? 'Yes' : 'No'}}</td>
      <td>{{recipe.points || 'N/A'}}</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage" let-columns>
    <tr>
      <td colspan="6" style="padding: 3em; text-align: center;">
        No recipes found
      </td>
    </tr>
  </ng-template>
</p-table>